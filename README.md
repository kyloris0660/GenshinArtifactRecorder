# 原神圣遗物记录脚本

## 建议使用

[GenshinSpider](https://github.com/yllhwa/GenshinSpider)，更好的实现。

## 说明

将图像或视频中出现的圣遗物面板信息保存至excel文件中，用来记录我每天刷圣遗物本的掉落情况。

面板信息可以为背包中或副本结算界面，只要出现面板就行。

文字识别调用百度AI的api。

## 使用说明

* Path及参数记录于`config.ini`。
* 使用例：`python main.py`
* 单一圣遗物面板使用例：`python process_croped_img.py your/full/path/xxx.png`


## 输出excel示例

| 圣遗物名称     | 圣遗物类型 | 主属性         | 主属性数值 | 星级 | 等级 | 副属性1  | 副属性1数值 | 副属性2 | 副属性2数值 | 副属性3  | 副属性3数值 | 副属性4 | 副属性4数值 | 所属套装 | 创建时间   | 得分 |
| -------------- | ---------- | -------------- | ---------- | ---- | ---- | -------- | ----------- | ------- | ----------- | -------- | ----------- | ------- | ----------- | -------- | ---------- | ---- |
| 翠绿的猎人之冠 | 理之冠     | 暴击伤害       | 9.3%       | 5    | 0    | 生命值   | 269         | 攻击力  | 4.7%        | 防御力   | 16          |         |             | 翠绿之影 | 2021/01/10 | 1.2  |
| 翠绿猎人的容器 | 空之杯     | 风元素伤害加成 | 7.0%       | 5    | 0    | 暴击伤害 | 6.2%        | 生命值  | 239         | 元素精通 | 16          |         |             | 翠绿之影 | 2021/01/10 | 2.4  |

## 评分规则

副词条初始有效词条数值定义如下：

```
percentage_atk = ['4.1%', '4.7%', '5.3%', '5.8%'] # 百分比攻击力，权重 1
value_atk = ['14', '16', '18', '19']  # 数值攻击力，权重 0.5
crit_rate = ['2.7%', '3.1%', '3.5%', '3.9%'] # 暴击率，权重 2
crit_dmg = ['5.4%', '6.2%', '7.0%', '7.8%'] # 暴击伤害，权重 2
recharge_rate = ['4.5%', '5.2%', '5.8%', '6.5%'] # 元素充能效率，权重 1
```

## TODO List（按优先级）

- [x] 可选是否保留图像文件
- [ ] 面向视频文件脚本
- [x] 圣遗物评分
- [ ] 圣遗物选择器
- [ ] ~~离线OCR~~ 

## 依赖

* Python 3.6.0+
  * opencv-python
  * requests
  * pandas
  * numpy
  * fuzzywuzzy
  * scikit-image
* 百度AI的access_token



